{% block title %}Self Assessment - Session {{ session_number }}{% endblock %}

{% block content %}

    <style>
        body {
            background-color: #FFFFFF;
            font-family: Arial, Helvetica, sans-serif;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        .session-info {
            padding: 20px;
            text-align: center;
        }

        .baseline-info {
            background-color: #e7f3ff;
            border: 1px solid #b3d9ff;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .assessment-form {
            background-color: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }

        .question-group {
            margin-bottom: 30px;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }

        .question-label {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            display: block;
        }

        .slider-wrapper {
            display: flex;
            align-items: center;
            width: 100%;
            position: relative;
        }

        .slider-label {
            width: 120px;
            text-align: center;
            font-size: 0.9em;
            color: #666;
        }

        .slider-label.left {
            text-align: right;
            padding-right: 15px;
        }

        .slider-label.right {
            text-align: left;
            padding-left: 15px;
        }

        .slider-container {
            position: relative;
            flex-grow: 1;
            padding: 10px 0;
        }

        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            background: transparent;
            height: 8px;
            position: relative;
            z-index: 2;
        }

        input[type=range]::-webkit-slider-runnable-track {
            background: #dee2e6;
            height: 8px;
            border-radius: 4px;
        }

        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 24px;
            width: 24px;
            background: #007bff;
            border-radius: 50%;
            margin-top: -8px;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        input[type=range]::-moz-range-track {
            background: #dee2e6;
            height: 8px;
            border-radius: 4px;
        }

        input[type=range]::-moz-range-thumb {
            height: 24px;
            width: 24px;
            background: #007bff;
            border-radius: 50%;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        input[type=range]::-ms-track {
            background: #dee2e6;
            height: 8px;
            border-radius: 4px;
        }

        input[type=range]::-ms-thumb {
            height: 24px;
            width: 24px;
            background: #007bff;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .submit-section {
            text-align: center;
            margin-top: 10px;
            padding: 20px;
        }

        h1, h2 {
            text-align: center;
            color: #333;
        }

        .required {
            color: #dc3545;
        }
    </style>

    {# Session context information showing role played and instructions #}
    <div class="session-info">
        {% if session_number == 0 %}
            <h2>Baseline Assessment</h2>
            <div class="baseline-info">
                <p><strong>Initial Measurement</strong></p>
                <p>Please evaluate how you feel right now, before starting any work tasks</p>
            </div>
        {% else %}
            <h2>Post-Session Assessment</h2>
            <p><strong>Role played:</strong> {{ role_played }}</p>
            <p>Please evaluate your experience during {{ session_name }}</p>
        {% endif %}
    </div>

    <div class="assessment-form">

        {% if session_number == 0 %}
            {# BASELINE QUESTIONS #}

            {# MFI Mental 1 - Wandering thoughts #}
            <div class="question-group">
                <label class="question-label">
                    My thoughts easily wander <span class="required">*</span>
                </label>
                <div class="slider-wrapper">
                    <span class="slider-label left">Not at all</span>
                    <div class="slider-container">
                        <input type="range" name="mfi_mental_wander" min="0" max="100" step="1" required>
                    </div>
                    <span class="slider-label right">Extremely</span>
                </div>
            </div>

            {# MFI Mental 2 - Concentration effort #}
            <div class="question-group">
                <label class="question-label">
                    It takes a lot of effort to concentrate on things <span class="required">*</span>
                </label>
                <div class="slider-wrapper">
                    <span class="slider-label left">Not at all</span>
                    <div class="slider-container">
                        <input type="range" name="mfi_concentration_effort" min="0" max="100" step="1" required>
                    </div>
                    <span class="slider-label right">Extremely</span>
                </div>
            </div>

            {# ZFE - Dread #}
            <div class="question-group">
                <label class="question-label">
                    How much do you dread having to do things right now? <span class="required">*</span>
                </label>
                <div class="slider-wrapper">
                    <span class="slider-label left">Not at all</span>
                    <div class="slider-container">
                        <input type="range" name="zfe_dread" min="0" max="100" step="1" required>
                    </div>
                    <span class="slider-label right">Extremely</span>
                </div>
            </div>

            {# KSS - Alertness/Sleepiness #}
            <div class="question-group">
                <label class="question-label">
                    How alert/sleepy do you feel right now? <span class="required">*</span>
                </label>
                <div class="slider-wrapper">
                    <span class="slider-label left">Extremely alert</span>
                    <div class="slider-container">
                        <input type="range" name="kss_alertness" min="0" max="100" step="1" required>
                    </div>
                    <span class="slider-label right">Extremely sleepy</span>
                </div>
            </div>

            {# Motivation for upcoming tasks #}
            <div class="question-group">
                <label class="question-label">
                    How motivated do you feel for the upcoming tasks? <span class="required">*</span>
                </label>
                <div class="slider-wrapper">
                    <span class="slider-label left">Not motivated at all</span>
                    <div class="slider-container">
                        <input type="range" name="motivation_baseline" min="0" max="100" step="1" required>
                    </div>
                    <span class="slider-label right">Extremely motivated</span>
                </div>
            </div>

            {# AFI - Follow through on plans #}
            <div class="question-group">
                <label class="question-label">
                    How well can you follow through on your plans right now? <span class="required">*</span>
                </label>
                <div class="slider-wrapper">
                    <span class="slider-label left">Not at all</span>
                    <div class="slider-container">
                        <input type="range" name="afi_follow_through" min="0" max="100" step="1" required>
                    </div>
                    <span class="slider-label right">Extremely well</span>
                </div>
            </div>

        {% else %}
            {# POST-TASK QUESTIONS #}

            {# Fatigue Level Assessment #}
            <div class="question-group">
                <label class="question-label">
                    How tired/fatigued did you feel during this session? <span class="required">*</span>
                </label>
                <div class="slider-wrapper">
                    <span class="slider-label left">Not tired at all</span>
                    <div class="slider-container">
                        <input type="range" name="fatigue_level" min="0" max="100" step="1" required>
                    </div>
                    <span class="slider-label right">Extremely tired</span>
                </div>
            </div>

            {# Mental Effort Assessment #}
            <div class="question-group">
                <label class="question-label">
                    How much mental effort did the task require? <span class="required">*</span>
                </label>
                <div class="slider-wrapper">
                    <span class="slider-label left">Very low effort</span>
                    <div class="slider-container">
                        <input type="range" name="mental_effort" min="0" max="100" step="1" required>
                    </div>
                    <span class="slider-label right">Very high effort</span>
                </div>
            </div>

            {# Concentration Assessment #}
            <div class="question-group">
                <label class="question-label">
                    How difficult was it to concentrate during the task? <span class="required">*</span>
                </label>
                <div class="slider-wrapper">
                    <span class="slider-label left">Very easy</span>
                    <div class="slider-container">
                        <input type="range" name="concentration_difficulty" min="0" max="100" step="1" required>
                    </div>
                    <span class="slider-label right">Very difficult</span>
                </div>
            </div>

            {# Motivation Level Assessment #}
            <div class="question-group">
                <label class="question-label">
                    How motivated did you feel during this session? <span class="required">*</span>
                </label>
                <div class="slider-wrapper">
                    <span class="slider-label left">Very low motivation</span>
                    <div class="slider-container">
                        <input type="range" name="motivation_level" min="0" max="100" step="1" required>
                    </div>
                    <span class="slider-label right">Very high motivation</span>
                </div>
            </div>

            {# Effort-Cost Assessment #}
            <div class="question-group">
                <label class="question-label">
                    Did the task feel worth the mental energy invested? <span class="required">*</span>
                </label>
                <div class="slider-wrapper">
                    <span class="slider-label left">Not worth it at all</span>
                    <div class="slider-container">
                        <input type="range" name="effort_cost_worth" min="0" max="100" step="1" required>
                    </div>
                    <span class="slider-label right">Definitely worth it</span>
                </div>
            </div>

        {% endif %}
    </div>

    {# Form submission area with contextual instructions #}
    <div class="submit-section">
        {% if session_number == 0 %}
            <p>Please answer all questions about your current state before continuing.</p>
        {% else %}
            <p>Please answer all questions about your experience during this session before continuing.</p>
        {% endif %}
        {% next_button %}
    </div>

    <script>
        // Optional: Add value display on slider change
        document.querySelectorAll('input[type="range"]').forEach(function(slider) {
            slider.addEventListener('input', function() {
                // Store value in data attribute for backend processing
                this.setAttribute('data-value', this.value);
            });

            // Set initial middle value
            slider.value = 50;
        });
    </script>

{% endblock %}